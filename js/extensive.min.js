$((function(){var socket=io(),$username=$("#username").val(),$chatThreads=$("#chat-threads"),$currentThreads={};socket.emit("get threads",{username:$username}),socket.on("gotten threads",response=>{for($chatThreads.html(""),i=0;i<response.length;i++){var result=response[i],mar=$(`#${result.sender}1234`).val(),mak=$(`#${result.receiver}1234`).val("");$currentThreads[result.receiver]=!0,result.sender!==$username&&(result.receiver!==$username||mar||mak)||(result.sender===$username?socket.emit("get thread details",{username:result.receiver}):socket.emit("get thread details",{username:result.sender})),response[response.length-1]}socket.on("gotten thread details",results=>{addChatThread({firstname:results.firstname,lastname:results.lastname,username:results.username})})});const addChatThread=data=>{var options=options||{};options.fade=!1;var $threadDiv=$("<div>").html(`\n            <a id="${data.username}1234" class="text-reset nav-link p-0 mb-6" href="/chat/${data.username}">\n                <div class="card card-active-listener">\n                    <div class="card-body">\n                        <div class="media">\n                            <div class="avatar mr-5">\n                                <img class="avatar-img" src="/asset/images/avatars/11.jpg" alt="Bootstrap Themes">\n                            </div>\n                            <div class="media-body overflow-hidden">\n                                <div class="d-flex align-items-center mb-1">\n                                    <h6 class="text-truncate mb-0 mr-auto">${data.firstname} ${data.lastname}</h6>\n                                    \x3c!--<p class="small text-muted text-nowrap ml-4">10:42 am</p>--\x3e\n                                </div>\n                                <div class="text-truncate" id="${data.username}-thread"></div>\n                            </div>\n                        </div>\n                    </div>\n                    \x3c!--<div class="badge badge-circle badge-primary badge-border-light badge-top-right">\n                        <span>3</span>\n                    </div>--\x3e\n                </div>\n            </a>\n        `),typingClass=data.typing?"typing":"";addThreadElement($threadDiv,options)},addThreadElement=(el,options)=>{var $el=$(el);options||(options={}),void 0===options.fade&&(options.fade=!0),void 0===options.prepend&&(options.prepend=!1),options.fade&&$el.hide().fadeIn(FADE_TIME),options.prepend?$chatThreads.prepend($el):$chatThreads.append($el)}}));