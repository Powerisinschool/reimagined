<!DOCTYPE html>
<html>
  <%- include('../include/head'); -%>
  <body class="text-center">
    <%- include('../include/preload'); -%>
    <div class="content-see visible d-block w-100 m-0" style="height: 100vh;">
      <input style="display: none;" value="<%- next %>" id="continue">
      <div class="w-100 d-flex flex-wrap justify-content-center align-items-center p-3 m-0 bg-light" style="height: 100vh;">
        <div class="bg-white row overflow-hidden h-100 d-flex flex-wrap align-items-stretch flex-row-reverse" style="width: 1170px;">
          <div class="col-lg d-flex flex-wrap align-items-center">
            <div class="d-flex flex-column">
              <div class="p-2">
                <div class="progress" id="meprog" style="height: 1px;">
                  <div class="progress-bar bg-primary" id="loginProgress" style="width: 0%" role="progressbar" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
                <div class="col-md d-flex flex-wrap">

                  <!-- Heading -->
                  <h1 class="text-uppercase text-center w-100 d-block pb-4 login-title">Sign in</h1>

                  <!-- Text -->
                  <p class="text-uppercase text-center w-100 d-block pb-4 login-title">Welcome to the official Cloud Login.</p>

                  <!-- Form -->
                  <form class="needs-validation w-100" id="loginform" action="/auth/login" method="POST" novalidate>
                      <!-- Email -->
                      <div class="form-group form-row validate-input">
                          <label for="email" class="sr-only">Email / Username</label>
                          <input type="text" class="form-control form-control-lg" name="username" id="username" placeholder="Enter your username / email" required>
                          <div class="invalid-feedback" id="usernameerror" style="margin-bottom: -0.6rem;">
                            Please input a valid username or email.
                          </div>
                      </div>

                      <!-- Password -->
                      <div class="form-group form-row validate-input">
                          <label for="password" class="sr-only">Password</label>
                          <input type="password" class="form-control form-control-lg" name="password" id="password" placeholder="Enter your password" required>
                          <div class="invalid-feedback" id="usernameerror">
                            Please input a password.
                          </div>
                      </div>

                      <div class="form-group d-flex justify-content-between">
                          <div class="custom-control custom-checkbox">
                              <input type="checkbox" class="custom-control-input" checked="" id="checkbox-remember">
                              <label class="custom-control-label" for="checkbox-remember">Remember me</label>
                          </div>
                          <a href="./password-reset.html">Reset password</a>
                      </div>

                      <!-- Submit -->
                      <button class="btn btn-lg btn-block btn-outline-primary" type="submit">Sign in</button>
                  </form>

                  <!-- Text -->
                  <p class="text-center w-100">
                      Don't have an account yet <a href="./signup">Sign up</a>.
                  </p>

                </div>
              </div>
            </div>
          </div>
          <div class="w-50 col-lg d-none d-lg-flex flex-wrap align-items-center justify-content-center">
            <div class="d-flex flex-column">
              <a class="p-2" href="/"><img data-src="/icons/cloud-fill.svg" class="p-auto lazyload" style="height: 12.5vw;" alt="..."></a>
              <div class="p-2"><span class="text-primary" style="font-size: 4.5em;">T-Drive</span></div>
            </div>
          </div>
          <!--<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
            Login Errors
          </button>-->
          
          <!-- Modal -->
          <div class="modal fade" id="errorModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Error</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body" id="modalBody">
                  Login Errors
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                  <button type="button" onclick="window.location.href='/signup'" class="btn btn-primary">Register</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script async src="/js/ajax.min.js"></script>
    <script async>
      $('#meprog').css("display", "none");
      (function() {
        'use strict';
        window.addEventListener('load', function() {
          // Fetch all the forms we want to apply custom Bootstrap validation styles to
          var forms = document.getElementsByClassName('needs-validation');
          // Loop over them and prevent submission
          var validation = Array.prototype.filter.call(forms, function(form) {
            form.addEventListener('submit', function(event) {
              if (form.checkValidity() === false) {
                event.preventDefault();
                event.stopPropagation();
              } else {
                login(event);
                //signup(event);
              }
              form.classList.add('was-validated');
            }, false);
          });
        }, false);
      })();
    </script>
  </body>
</html>